define("wkview:widget/view_recom_thirdad/view_recom_thirdad.js",function(e,n,a){var t=e("wkcommon:widget/ui/lib/jquery/jquery.js"),d=e("wkcommon:widget/lib/doT/doT.min.js"),i=e("wkcommon:widget/ui/lib/inCharset/inCharset.js"),c=e("wkcommon:widget/ui/js_core/log/log.js"),l=e("wkview:widget/view_recom_thirdad/goldclue-content/goldclue-content.js"),o=e("wkcommon:widget/lib/fis/data/data.js"),r={init:function(e){var n=this;if(e=e.data,n.temp=0,n.fcEid=+e.eid||0,n.rightFc=e&&e.right_fengchao_ad?e.right_fengchao_ad:"",n.readFc=e&&e.read_fengchao_ad?e.read_fengchao_ad:"",n.rightWm=e&&e.recommend_ad_wangmeng?e.recommend_ad_wangmeng:"",n.goldClue=e&&e.right_fengchao_gold_ad?e.right_fengchao_gold_ad:"",n.wenji="",n.rightFc&&n.rightFc.ad_place_data&&n.renderLikeRecomFc(n.rightFc),!n.goldClue&&n.readFc&&n.readFc.ad_place_data&&t.event.trigger("docloadFCData",n.readFc),n.goldClue&&t(".goldclue-wrap").length>0){var a=e,d=o.get("WkInfo").DocInfo.docId;t.ajax({url:"/org/interface/getcorpusinfo?doc_id="+d,type:"get",success:function(e){0===+e.status.code&&(c.xsend(1,101055),n.wenji=e.data,n.renderGoldClue(a,e.data),e.data.goldClue=n.goldClue,t.event.trigger("showendPageGoldClueAd",e.data))}})}n.rightWm&&n.renderLikeRecomWm(n.rightWm),n.logObj={},n.fcEid&&n.logNum(n.fcEid),n.events()},renderGoldClue:function(e,n){var a=(e.right_fengchao_gold_ad.ad_place_data.url,'<div class="goldclue-content">\n<div class="goldclue-head">\n<p class="goldclue-count"><em>{{= it.data.corpus_list.length}}</em>\u7bc7</p>\n<p class="goldclue-title">\u76f8\u5173\u7cbe\u54c1\u6587\u8f91</p>\n<p class="goldclue-notes"><em>{{= it.data.down_count}}</em>\u4eba\u5df2\u4e0b\u8f7d</p>\n</div>\n<ul class="goldclue-main">\n{{~it.data.show_corpus :item:i}}{{? i< 3}}\n		<li><a><span class="ic ic-{{= item[2]}}"></span>{{= item[1]}}</a></li>\n{{?}}{{~}}</ul>\n<div class="goldclue-bottom">\n\u67e5\u770b\u5168\u90e8<em>{{= it.data.corpus_list.length}}</em>\u7bc7\u6587\u6863 ></div>\n</div>');a=d.template(a),t(".goldclue-wrap").html(a({data:n}))},renderLikeRecomFc:function(e){var n=this;t(".frist-item").html(e.ad_place_data);var a=e.ad_place_js,d="<script>"+a+"</script>";t("head").append(d);var l=t(".ec-text").html(),o=t(".ec-gl-des").html();(new i.InCharset).get(l,"gbk",function(e){c.xsend(1,100939,{adTitle:e,clickUrl:o})});var r=t(".frist-item .ec-gl-link");if(r.length>0){var g=n.getQueryString("tn")||n.getQueryString("from")||"";g?r.attr("href",r.attr("href")+"&shh="+location.hostname+"&sht="+g):r.attr("href",r.attr("href")+"&shh=wenku.baidu.com")}},renderLikeRecomWm:function(e){var n=e.data.recommends[0],a='<div class="item wangmeng_income">\n<p class="doc-title"><b class="ic ic-wangmeng"></b><a href="{{= it.link}}" class="link-wangmeng" target="_blank" title="{{= it.word}}">{{= it.word}}</a>\n</p>\n<div class="tail-info">\n<span style="width: 58%; display: inline-block;">www.baidu.com</span><span class="gd-g-u gd-u-3-8">\u641c\u7d22\u63a8\u8350</span>\n</div>\n</div>\n';a=d.template(a),t(".frist-item").html(a({word:n.word,link:n.link})),c.xsend(1,100945),n.word||c.xsend(1,101025)},getQueryString:function(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(n);return null!=a?unescape(a[2]):null},logNum:function(e){var n=this;62307102===e&&n.rightFc&&n.rightFc.ad_place_data?n.logObj.id="101026":82307102===e&&n.readFc&&n.readFc.ad_place_data?n.logObj.id="101027":72307102===e&&n.readFc&&n.readFc.ad_place_data&&(n.logObj.id="101028"),n.logObj.id&&(t(".more-btn-banner .banner-download").on("click",function(){c.xsend(1,n.logObj.id,{index:1})}),t(".pay-page-inner .reader-download").on("click",function(){c.xsend(1,n.logObj.id,{index:2})}),t(".pay-page-inner .btn-login-joinvip-rightnow").on("click",function(){c.xsend(1,n.logObj.id,{index:3})}),t(".more-btn-banner .goBtn").on("click",function(){c.xsend(1,n.logObj.id,{index:4})}))},events:function(){var e=this;t(".goldclue-wrap").on("click",function(n){var a=t(n.target);if(!a.hasClass("goldclue-notes")){c.xsend(1,101056);var d=e.goldClue;e.temp||t(".goldclue-wrap").hasClass("second-click")?new l(d,e.wenji,3):(new l(d,e.wenji,1),t(".goldclue-wrap").hasClass("second-click")||t(".goldclue-wrap").addClass("second-click"),e.temp=e.temp+1)}})}};a.exports=r});